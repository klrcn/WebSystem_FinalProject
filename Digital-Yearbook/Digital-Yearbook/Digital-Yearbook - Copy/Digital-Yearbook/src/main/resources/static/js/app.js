// Academic Programs
const academicPrograms = {
    "College of Law": {
        description: "The College of Law provides comprehensive legal education with a focus on ethics, critical thinking, and practical skills. We prepare students for successful careers in the legal profession.",
        image: "/uploads/law.jpg",
        vision: "Academically competitive, research and development focused, public service-driven, and economically sustainable state higher education institution.",
        mission: "To offer acadernic programs and services that will effectively transform individuals into productive citizens of the country and accelerate the development of high-level professionals who will provide leadership in meeting the demands of sustainable development and challenges of a diverse and globalized society.",
        coreValues: ["Relevance", "Integrity", "Productivity", "Excellence"],
        leadershipMessage: "As Dean of the College of Law, I am proud of our tradition of academic excellence and our commitment to molding future leaders of the legal profession.",
        faculty: [
            { name: "Atty. Juan Dela Cruz", position: "Dean, Professor of Constitutional Law", image: "/uploads/a.jpg" },
            { name: "Atty. Maria Santos", position: "Professor of Criminal Law", image: "/uploads/a.jpg" },
            { name: "Atty. Roberto Garcia", position: "Professor of Civil Law", image: "/uploads/a.jpg" }
        ],
            programs: [
                {
                    name: "Bachelor of Laws",
                    students: [
                    { name: "Aquino, Benigno C.", image: "/uploads/a.jpg", achievements: ["Moot Court Champion", "Academic Excellence"] },
                        { name: "Roxas, Mar L.", image: "/uploads/a.jpg", achievements: ["Legal Writing Award", "Bar Exam Topnotcher"] }
                        ]
                    }
                ]
            },
            "College of Agriculture, Fisheries, and Natural Resources": {
                description: "The College of Agriculture focuses on sustainable farming practices, fisheries management, and natural resource conservation to address global food security challenges.",
                image: "/uploads/agri.png",
                vision: "To be a center of excellence in agricultural, fisheries, and natural resources education, research, and extension in Eastern Philippines.",
                mission: "To develop globally competitive professionals in agriculture, fisheries, and natural resources through quality instruction, research, and community engagement.",
                coreValues: ["Sustainability", "Innovation", "Excellence", "Service", "Environmental Stewardship"],
                leadershipMessage: "Our college is committed to developing agricultural leaders who will drive sustainable development in rural communities.",
                faculty: [
                    { name: "Dr. Manuel Reyes", position: "Dean, Professor of Agronomy", image: "/uploads/a.jpg" },
                    { name: "Prof. Lucia Hernandez", position: "Chair, Department of Fisheries", image: "/uploads/a.jpg" },
                    { name: "Dr. Andres Mariano", position: "Professor of Forestry", image: "/uploads/a.jpg" }
                ],
                programs: [
                    {
                    name: "Bachelor of Science in Agribusiness",
                            students: [
                                { name: "Dela Rosa, Manuel T.", image: "/uploads/a.jpg", achievements: ["Sustainable Farming Award", "Agri-Entrepreneur"] },
                                { name: "Hernandez, Lucia M.", image: "/uploads/a.jpg", achievements: ["Research in Crop Science", "Community Development"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Agriculture",
                            students: [
                                { name: "Cruz, Juan P.", image: "/uploads/a.jpg", achievements: ["Animal Science Research Grant"] },
                                { name: "Santos, Maria L.", image: "/uploads/a.jpg", achievements: ["Crop Protection Innovation Award"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Fisheries",
                            students: [
                                { name: "Mariano, Andres S.", image: "/uploads/a.jpg", achievements: ["Aquaculture Innovation", "Marine Conservation"] },
                                { name: "Aquino, Corazon P.", image: "/uploads/a.jpg", achievements: ["Fisheries Management Award", "Research Publication"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Forestry",
                            students: [
                                { name: "Cajandab, Shiela Mae C.", image: "/uploads/a.jpg", achievements: ["Best in Kugang Award"] },
                                { name: "Gomez, Sofia R.", image: "/uploads/a.jpg", achievements: ["Sustainable Forestry Research"] }
                            ]
                        }
                    ]
                },
                "College of Arts and Communication": {
                    description: "The College of Arts and Communication develops creative thinkers and effective communicators who contribute to cultural development and social progress.",
                    image: "/uploads/cac.jpg",
                    vision: "To be the leading center for arts and communication education in Eastern Philippines, fostering creativity, critical thinking, and cultural awareness.",
                    mission: "To provide comprehensive education in arts and communication that empowers students to become innovative professionals and cultural leaders.",
                    coreValues: ["Creativity", "Expression", "Cultural Awareness", "Critical Thinking", "Communication Excellence"],
                    leadershipMessage: "Our college nurtures the creative spirit and communication skills essential for meaningful participation in society and cultural development.",
                    faculty: [
                        { name: "Dr. Elena Torres", position: "Dean, Professor of Literature", image: "/uploads/a.jpg" },
                        { name: "Prof. Ricardo Javier", position: "Chair, Department of Political Science", image: "/uploads/a.jpg" },
                        { name: "Dr. Beatrice Lim", position: "Professor of Communication", image: "/uploads/a.jpg" }
                    ],
                    programs: [
                        {
                            name: "Bachelor of Arts in Literature and Cultural Studies",
                            students: [
                                { name: "Garcia, Miguel T.", image: "/uploads/a.jpg", achievements: ["Literary Analysis Award"] },
                                { name: "Torres, Anna L.", image: "/uploads/a.jpg", achievements: ["Cultural Research Grant"] }
                            ]
                        },
                        {
                            name: "Bachelor of Arts in English Language Studies",
                            students: [
                                { name: "Lim, Patricia D.", image: "/uploads/a.jpg", achievements: ["Linguistics Research"] },
                                { name: "Ong, Michael T.", image: "/uploads/a.jpg", achievements: ["Language Teaching Excellence"] }
                            ]
                        },
                        {
                            name: "Bachelor of Arts major in Political Science",
                            students: [
                                { name: "Sy, Henry C.", image: "/uploads/a.jpg", achievements: ["Model UN Best Delegate"] },
                                { name: "Chua, Samantha L.", image: "/uploads/a.jpg", achievements: ["Public Policy Research"] }
                            ]
                        },
                        {
                            name: "Bachelor of Arts major in Public Administration",
                            students: [
                                { name: "Alvarez, James R.", image: "/uploads/a.jpg", achievements: ["Governance Innovation"] },
                                { name: "Ramos, Carla M.", image: "/uploads/a.jpg", achievements: ["Public Service Award"] }
                            ]
                        },
                        {
                            name: "Bachelor of Arts major in Sociology",
                            students: [
                                { name: "Fernandez, Anna Marie S.", image: "/uploads/a.jpg", achievements: ["Community Research"] },
                                { name: "Martinez, Carlos J.", image: "/uploads/a.jpg", achievements: ["Social Analysis Award"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Community Development",
                            students: [
                                { name: "Reyes, Antonio C.", image: "/uploads/a.jpg", achievements: ["Community Leadership"] },
                                { name: "Gomez, Maria L.", image: "/uploads/a.jpg", achievements: ["Development Project Award"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Criminology",
                            students: [
                                { name: "Rivera, Maria Cristina T.", image: "/uploads/a.jpg", achievements: ["Forensic Science Excellence"] },
                                { name: "Gonzales, Pedro M.", image: "/uploads/a.jpg", achievements: ["Criminal Justice Research"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Development Communication",
                            students: [
                                { name: "Dizon, Patricia L.", image: "/uploads/a.jpg", achievements: ["Media for Development"] },
                                { name: "Castro, Eduardo M.", image: "/uploads/a.jpg", achievements: ["Communication Strategy Award"] }
                            ]
                        }
                    ]
                },
                "College of Business Administration": {
                    description: "The College of Business Administration prepares students for leadership roles in business and entrepreneurship. Our programs focus on developing strategic thinking and management skills.",
                    image: "/uploads/cba.jpg",
                    vision: "To be the leading business school in Eastern Philippines, recognized for excellence in business education and entrepreneurship development.",
                    mission: "To develop ethical and innovative business leaders through quality education, research, and industry partnerships.",
                    coreValues: ["Innovation", "Integrity", "Leadership", "Entrepreneurship", "Excellence"],
                    leadershipMessage: "Our college empowers future business leaders with the knowledge and skills to drive economic growth and sustainable development.",
                    faculty: [
                        { name: "Dr. Roberto Santos", position: "Dean, Professor of Management", image: "/uploads/a.jpg" },
                        { name: "Prof. Angela Cruz", position: "Chair, Department of Marketing", image: "/uploads/a.jpg" },
                        { name: "Dr. Benjamin Reyes", position: "Professor of Finance", image: "/uploads/a.jpg" }
                    ],
                    programs: [
                        {
                            name: "Bachelor of Science in Accountancy",
                            students: [
                                { name: "Ong, Michael T.", image: "/uploads/a.jpg", achievements: ["CPA Board Topnotcher", "Financial Analysis Award"] },
                                { name: "Chua, Samantha L.", image: "/uploads/a.jpg", achievements: ["Audit Excellence", "Business Plan Competition Winner"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Business Administration",
                            students: [
                                { name: "Sy, Henry C.", image: "/uploads/a.jpg", achievements: ["Entrepreneur of the Year", "Startup Incubator"] },
                                { name: "Lim, Patricia D.", image: "/uploads/a.jpg", achievements: ["Marketing Innovation Award", "Leadership Excellence"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Business Economics",
                            students: [
                                { name: "Tan, Michelle L.", image: "/uploads/a.jpg", achievements: ["Economic Analysis Award"] },
                                { name: "Lim, Robert S.", image: "/uploads/a.jpg", achievements: ["Market Research Excellence"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Entrepreneurship",
                            students: [
                                { name: "Dela Cruz, Jennifer M.", image: "/uploads/a.jpg", achievements: ["Startup Founder", "Innovation Grant"] },
                                { name: "Cruz, Mark Anthony R.", image: "/uploads/a.jpg", achievements: ["Business Pitch Competition Winner"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Hospitality Management",
                            students: [
                                { name: "Santos, Juan P.", image: "/uploads/a.jpg", achievements: ["Hotel Management Excellence"] },
                                { name: "Lopez, Maria A.", image: "/uploads/a.jpg", achievements: ["Tourism Innovation Award"] }
                            ]
                        }
                    ]
                },
                "College of Education": {
                    description: "The College of Education develops future educators who are committed to excellence in teaching. Our programs emphasize innovative teaching methods and educational leadership.",
                    image: "/uploads/coed.jpg",
                    vision: "To be the premier institution for teacher education in Eastern Philippines, shaping exceptional educators and educational leaders.",
                    mission: "To prepare competent, compassionate, and innovative educators through quality instruction, research, and community engagement.",
                    coreValues: ["Excellence", "Innovation", "Compassion", "Leadership", "Lifelong Learning"],
                    leadershipMessage: "We are dedicated to developing educators who will inspire future generations and transform education in the Philippines.",
                    faculty: [
                        { name: "Dr. Sofia Reyes", position: "Dean, Professor of Education", image: "/uploads/a.jpg" },
                        { name: "Prof. Carlos Martinez", position: "Chair, Secondary Education", image: "/uploads/a.jpg" },
                        { name: "Dr. Elena Fernandez", position: "Professor of Elementary Education", image: "/uploads/a.jpg" }
                    ],
                    programs: [
                        {
                            name: "Bachelor of Elementary Education",
                            students: [
                                { name: "Rivera, Maria Cristina T.", image: "/uploads/a.jpg", achievements: ["Outstanding Teacher Award", "Community Service"] },
                                { name: "Gonzales, Pedro M.", image: "/uploads/a.jpg", achievements: ["Innovative Teaching Methods", "Research Grant"] }
                            ]
                        },
                        {
                            name: "Bachelor of Secondary Education",
                            students: [
                                { name: "Fernandez, Anna Marie S.", image: "/uploads/a.jpg", achievements: ["Science Education Award", "Mentorship Program"] }
                            ]
                        },
                        {
                            name: "Bachelor of Elementary Technology and Livelihood Education",
                            students: [
                                { name: "Reyes, Sofia M.", image: "/uploads/a.jpg", achievements: ["Agri-Fishery Innovation"] },
                                { name: "Garcia, Miguel T.", image: "/uploads/a.jpg", achievements: ["Industrial Arts Excellence"] }
                            ]
                        }
                    ]
                },
    "College of Engineering": {
                    description: "The College of Engineering prepares students to become innovative engineers capable of solving complex problems. Our programs combine theoretical knowledge with practical applications.",
                    image: "/uploads/ce.jpg",
                    vision: "To be a center of excellence in engineering education and research, producing globally competitive engineers for sustainable development.",
                    mission: "To provide quality engineering education that develops technically competent, innovative, and socially responsible engineers.",
                    coreValues: ["Innovation", "Excellence", "Sustainability", "Professionalism", "Social Responsibility"],
                    leadershipMessage: "Our college is committed to developing engineers who will drive technological innovation and sustainable development in the region.",
                    faculty: [
                        { name: "Engr. Ricardo Dela Cruz", position: "Dean, Professor of Civil Engineering", image: "/uploads/a.jpg" },
                        { name: "Dr. Maria Santos", position: "Chair, Department of Mechanical Engineering", image: "/uploads/a.jpg" },
                        { name: "Prof. Antonio Reyes", position: "Professor of Electrical Engineering", image: "/uploads/a.jpg" }
                    ],
                    programs: [
                        {
                            name: "Bachelor of Science in Agricultural and Biosystems Engineering",
                            students: [
                                { name: "Cruz, Mark Anthony R.", image: "/uploads/a.jpg", achievements: ["Structural Design Award", "Internship Excellence"] },
                                { name: "Dela Cruz, Jennifer M.", image: "/uploads/a.jpg", achievements: ["Cum Laude", "Research Publication"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Civil Engineering",
                            students: [
                                { name: "Lim, Robert S.", image: "/uploads/a.jpg", achievements: ["Innovation Grant", "Robotics Competition Winner"] },
                                { name: "Tan, Michelle L.", image: "/uploads/a.jpg", achievements: ["Energy Efficiency Award", "Dean's Lister"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Electrical Engineering",
                            students: [
                                { name: "Torres, Anna L.", image: "/uploads/a.jpg", achievements: ["Power Systems Innovation"] },
                                { name: "Santos, Juan P.", image: "/uploads/a.jpg", achievements: ["Renewable Energy Research"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Mechanical Engineering",
                            students: [
                                { name: "Reyes, Antonio C.", image: "/uploads/a.jpg", achievements: ["Machine Design Award"] },
                                { name: "Gomez, Maria L.", image: "/uploads/a.jpg", achievements: ["Thermodynamics Research"] }
                            ]
                        },
                        {
                            name: "Bachelor of Engineering Technology",
                            students: [
                                { name: "Lopez, Maria A.", image: "/uploads/a.jpg", achievements: ["Automotive Technology Excellence"] },
                                { name: "Garcia, Miguel T.", image: "/uploads/a.jpg", achievements: ["Electrical Engineering Innovation"] }
                            ]
                        }
                    ]
                },
                "College of Nursing and Allied Health Sciences": {
                    description: "The College of Nursing prepares compassionate healthcare professionals through rigorous academic programs and hands-on clinical experiences.",
                    image: "/uploads/cnahs.png",
                    vision: "To be a center of excellence in nursing and allied health education, producing competent and compassionate healthcare professionals.",
                    mission: "To provide quality education that develops competent, ethical, and compassionate nursing and allied health professionals.",
                    coreValues: ["Compassion", "Excellence", "Integrity", "Service", "Lifelong Learning"],
                    leadershipMessage: "Our college is dedicated to developing healthcare professionals who provide compassionate, evidence-based care to diverse populations.",
                    faculty: [
                        { name: "Dr. Corazon Aquino", position: "Dean, Professor of Nursing", image: "/uploads/a.jpg" },
                        { name: "Prof. Eduardo Castro", position: "Chair, Department of Radiologic Technology", image: "/uploads/a.jpg" },
                        { name: "Dr. Lucia Hernandez", position: "Professor of Community Health", image: "/uploads/a.jpg" }
                    ],
                    programs: [
                        {
                            name: "Bachelor of Science in Nursing",
                            students: [
                                { name: "Ramos, Carla M.", image: "/uploads/a.jpg", achievements: ["Clinical Excellence Award", "Community Health Leader"] },
                                { name: "Alvarez, James R.", image: "/uploads/a.jpg", achievements: ["Nursing Board Topnotcher", "Research in Patient Care"] }
                            ]
                        },
                        {
                            name: "Bachelor of Science in Radiologic Technology",
                            students: [
                                { name: "Gomez, Maria L.", image: "/uploads/a.jpg", achievements: ["Imaging Technology Innovation", "Academic Excellence"] },
                                { name: "Reyes, Antonio C.", image: "/uploads/a.jpg", achievements: ["Diagnostic Accuracy Award", "Research Grant"] }
                            ]
                        }
                    ]
                },
    "College of Science": {
        description: "The College of Science is dedicated to advancing scientific knowledge through research and education. We offer programs that prepare students for careers in various scientific fields.",
        image: "/uploads/cs.jpg",
        vision: "A globally competitive university producing top-caliber graduates in pursuit of higher economic welfare of the people and the community through inclusion and cooperation from the stakeholders",
        mission: "To provide quality science education that develops critical thinkers, innovators, and researchers who contribute to scientific advancement.",
        coreValues: ["Excellence", "Innovation", "Integrity", "Collaboration", "Scientific Curiosity"],
        leadershipMessage: "Our college is committed to advancing scientific knowledge and developing the next generation of scientists and researchers.",
        faculty: [
            { name: "Dr. Benjamin Lim", position: "Dean, Professor of Biology", image: "/uploads/a.jpg" },
            { name: "Prof. Maria Garcia", position: "Chair, Department of Information Technology", image: "/uploads/a.jpg" },
            { name: "Dr. Carlos Torres", position: "Professor of Marine Biology", image: "/uploads/a.jpg" }
        ],
        programs: [
                            {
                                name: "Bachelor of Science in Biology",
                                students: [
                                    { name: "Lopez, Maria A.", image: "/uploads/a.jpg", achievements: ["Summa Cum Laude", "Research Excellence Award"] },
                                    { name: "Santos, Juan P.", image: "/uploads/a.jpg", achievements: ["Dean's Lister", "Science Olympiad Champion"] },
                                    { name: "Reyes, Sofia M.", image: "/uploads/a.jpg", achievements: ["Best Thesis Award"] }
                                ]
                            },
                            {
                                name: "Bachelor of Science in Chemistry",
                                students: [
                                    { name: "Garcia, Miguel T.", image: "/uploads/a.jpg", achievements: ["Magna Cum Laude", "Chemistry Research Grant"] },
                                    { name: "Torres, Anna L.", image: "/uploads/a.jpg", achievements: ["Innovation Award", "Science Fair Winner"] }
                                ]
                            },
                            {
                                name: "Bachelor of Science in Environmental Science",
                                students: [
                                    { name: "Dela Cruz, Jennifer M.", image: "/uploads/a.jpg", achievements: ["Conservation Award"] },
                                    { name: "Lim, Robert S.", image: "/uploads/a.jpg", achievements: ["Environmental Research Grant"] }
                                ]
                            },
                            {
                                name: "Bachelor of Science in Information Technology",
                                students: [
                                    { name: "Abuyog, Rhona Mae E.", image: "/uploads/abuyog.jpg", achievements: ["Cum Laude", "Best Capstone Project"] },
                                    { name: "Alsola, Arriana Monique L.", image: "/uploads/alsolaa.jpg", achievements: ["Cum Laude", "Best Capstone Project", "Leadership Award"] },
                                    { name: "Alsola, Christian Kyle. M.", image: "/uploads/alsolak.jpg", achievements: ["Magna Cum Laude", "Programming Competition Winner", "Research Grant Recipient"] },
                                    { name: "Giray, Frhancien Klier M.", image: "/uploads/giray.jpg", achievements: ["Magna Cum Laude", "Best Capstone Project"], },
                                    { name: "Porio, Hirra Mae F.", image: "/uploads/porio.jpg", achievements: ["Cum Laude", "Community Service Award"] },
                                    { name: "Quilapio, Mark Kian R.", image: "/uploads/quilapio.jpg", achievements: ["Summa Cum Laude", "Hackathon Champion"] }
                                ]
                            },
                            {
                                name: "Bachelor of Science in Marine Biology",
                                students: [
                                    { name: "Cruz, Mark Anthony R.", image: "/uploads/a.jpg", achievements: ["Marine Conservation Award"] },
                                    { name: "Tan, Michelle L.", image: "/uploads/a.jpg", achievements: ["Coral Reef Research"] }
                                ]
                            },
                            {
                                name: "Bachelor of Science in Mathematics",
                                students: [
                                    { name: "Sy, Henry C.", image: "/uploads/a.jpg", achievements: ["Math Olympiad Medalist"] },
                                    { name: "Chua, Samantha L.", image: "/uploads/eyy.jpg", achievements: ["Applied Mathematics Research"] }
                                ]
                            }
                        ]
                    },
    "College of Veterinary Medicine": {
        description: "The College of Veterinary Medicine trains students in animal health care, disease prevention, and biomedical research to serve communities and the agriculture sector.",
        image: "/uploads/vetmed.jpg",
        vision: "To be the premier institution for veterinary education in Eastern Philippines, advancing animal health and welfare.",
        mission: "To provide excellent veterinary education that produces competent, ethical, and compassionate veterinarians and meat technologists.",
        coreValues: ["Compassion", "Excellence", "Ethics", "Innovation", "Service"],
        leadershipMessage: "Our college is dedicated to developing veterinary professionals who will safeguard animal health and ensure food safety.",
        faculty: [
            { name: "Dr. Eduardo Castro", position: "Dean, Professor of Veterinary Medicine", image: "/uploads/a.jpg" },
            { name: "Prof. Patricia Dizon", position: "Chair, Department of Meat Technology", image: "/uploads/a.jpg" },
            { name: "Dr. Manuel Reyes", position: "Professor of Animal Surgery", image: "/uploads/a.jpg" }
        ],
        programs: [
            {
                name: "Bachelor of Science in Meat Technology",
                students: [
                    { name: "Castro, Eduardo M.", image: "/uploads/image.jpg", achievements: ["Animal Surgery Excellence", "Research in Zoonotic Diseases"] },
                    { name: "Dizon, Patricia L.", image: "/uploads/image.jpg", achievements: ["Wildlife Conservation Award", "Community Vet Services"] }
                ]
            },
            {
                name: "Doctor of Veterinary Medicine",
                students: [
                    { name: "Gonzales, Pedro M.", image: "/uploads/image.jpg", achievements: ["Veterinary Pathology Research"] },
                    { name: "Fernandez, Anna Marie S.", image: "/uploads/image.jpg", achievements: ["Animal Welfare Award"] }
                ]
            }
        ]
    }
};

// CAPTCHA
let currentCaptcha = '';
let regCaptcha = '';

function generateCaptcha() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    currentCaptcha = Array.from({length: 5}, () => chars[Math.floor(Math.random() * chars.length)]).join('');
    document.getElementById('captchaText').textContent = currentCaptcha;
}

function generateRegCaptcha() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    regCaptcha = Array.from({length: 5}, () => chars[Math.floor(Math.random() * chars.length)]).join('');
    document.getElementById('regCaptchaText').textContent = regCaptcha;
}

function showPage(pageId) {
    const pages = [
        'loginPage', 'dashboardPage', 'yearSelectionPage', 'collegePage', 'coursesPage',
        'studentsPage', 'registerPage', 'visionPage', 'missionPage', 'coreValuesPage',
        'leadershipMessagePage', 'hymnPage', 'facultyPage', 'forgotPasswordPage'
    ];
    pages.forEach(page => document.getElementById(page).classList.add('hidden'));
    document.getElementById(pageId).classList.remove('hidden');

    if(pageId === 'yearSelectionPage' && !document.getElementById('yearGrid').children.length) createYearCards();
}

// YEAR CARDS
function createYearCards() {
    const yearGrid = document.getElementById('yearGrid');
    yearGrid.innerHTML = '';
    for(let year = 2005; year <= 2024; year++){
        const card = document.createElement('div');
        card.className = 'year-card';

        card.style.backgroundImage = `url('/uploads/end.jpg')`;
        card.innerHTML = `<div class="year-number">${year}</div>`;
        card.onclick = () => {
            document.getElementById('collegeYear').textContent = year;
            showColleges(year);
        };
        yearGrid.appendChild(card);
    }
}

function showColleges(year){
    document.getElementById('collegeYear').textContent = year;
    const collegeGrid = document.getElementById('collegeGrid');
    collegeGrid.innerHTML = '';
    Object.keys(academicPrograms).forEach(college => {
        const data = academicPrograms[college];
        const card = document.createElement('div');
        card.className = 'college-card';
        card.innerHTML = `
            <img src="${data.image}" class="college-image" alt="${college}">
            <h3 class="college-title">${college}</h3>
            <p class="college-description">${data.description}</p>
            <p style="text-align:center; margin-top:15px;"><strong>${data.programs.length}</strong> programs</p>
        `;
        card.onclick = () => showCourses(college);
        collegeGrid.appendChild(card);
    });
    showPage('collegePage');
}

function showCourses(college){
    document.getElementById('collegeName').textContent = college;
    const programGrid = document.getElementById('programGrid');
    programGrid.innerHTML = '';
    academicPrograms[college].programs.forEach(program => {
        const card = document.createElement('div');
        card.className = 'program-card';
        card.innerHTML = `<h3 class="program-name">${program.name}</h3>
                          <p class="program-student-count">${program.students.length} students</p>`;
        card.onclick = () => showStudents(college, program.name);
        programGrid.appendChild(card);
    });
    showPage('coursesPage');
}

function showStudents(college, programName){
    document.getElementById('programName').textContent = programName;
    const studentGrid = document.getElementById('studentGrid');
    studentGrid.innerHTML = '';
    const program = academicPrograms[college].programs.find(p => p.name === programName);
    program.students.forEach(student => {
        const card = document.createElement('div');
        card.className = 'student-card';
        const achievementsHTML = student.achievements?.length ?
            `<div class="achievements-container">
                <h4>Achievements:</h4>
                ${student.achievements.map(a=>`<span class="achievement-badge">${a}</span>`).join('')}
            </div>` : '';
        card.innerHTML = `
            <img src="${student.image}" class="student-image" alt="${student.name}">
            <div class="student-name">${student.name}</div>
            <div class="student-program">${programName}</div>
            ${achievementsHTML}
        `;
        studentGrid.appendChild(card);
    });
    showPage('studentsPage');
}

function showFaculty(college){
    document.getElementById('facultyCollegeTitle').textContent = `Faculty Members - ${college}`;
    const facultyGrid = document.getElementById('facultyGrid');
    facultyGrid.innerHTML = '';
    academicPrograms[college].faculty.forEach(faculty => {
        const card = document.createElement('div');
        card.className = 'faculty-card';
        card.innerHTML = `
            <img src="${faculty.image}" class="faculty-image" alt="${faculty.name}">
            <div class="faculty-name">${faculty.name}</div>
            <div class="faculty-position">${faculty.position}</div>
        `;
        facultyGrid.appendChild(card);
    });
    showPage('facultyPage');
}

document.getElementById('registerForm').addEventListener('submit', e=>{
    e.preventDefault();
    const captcha = document.getElementById('regCaptchaInput').value.trim();
    if(captcha.toUpperCase() !== regCaptcha.toUpperCase()){ alert('Invalid CAPTCHA'); generateRegCaptcha(); return; }

    const email = document.getElementById('regEmail').value.trim();
    const phone = document.getElementById('regPhone').value.trim();
    const password = document.getElementById('regPassword').value.trim();

    fetch('/api/register', {
        method: 'POST',
        headers: {'Content-Type':'application/x-www-form-urlencoded'},
        body:`email=${encodeURIComponent(email)}&phone=${encodeURIComponent(phone)}&password=${encodeURIComponent(password)}`
    })
    .then(r=>r.text())
    .then(msg=>{
        alert(msg);
        if(msg.includes('successful')) showLoginPage();
    })
    .catch(err=>alert('Error: ' + err));
});

document.getElementById('loginForm').addEventListener('submit', e=>{
    e.preventDefault();
    const captcha = document.getElementById('captchaInput').value.trim();
    if(captcha.toUpperCase() !== currentCaptcha.toUpperCase()){ alert('Invalid CAPTCHA'); generateCaptcha(); return; }

    const emailOrPhone = document.getElementById('emailOrPhone').value.trim();
    const password = document.getElementById('password').value.trim();

    fetch('/api/login', {
        method:'POST',
        headers:{'Content-Type':'application/x-www-form-urlencoded'},
        body:`emailOrPhone=${encodeURIComponent(emailOrPhone)}&password=${encodeURIComponent(password)}`
    })
    .then(r=>r.text())
    .then(msg=>{
        alert(msg);
        if(msg.includes('successful')){
            document.getElementById('usernameDisplay').textContent = emailOrPhone.split('@')[0] || "Graduate";
            showPage('dashboardPage');
        }
    })
    .catch(err=>alert('Error: '+err));
});

function showForgotPassword(event){
    if(event) event.preventDefault();
    document.getElementById('loginPage').classList.add('hidden');
    const container = document.getElementById('forgotFormContainer');
    container.innerHTML = `
        <form id="forgotPasswordForm">
            <div class="form-group">
                <label for="forgotEmail">Enter your email:</label>
                <input type="email" id="forgotEmail" required placeholder="your@email.com">
            </div>
            <button type="submit">Next</button>
        </form>
    `;
    container.querySelector('#forgotPasswordForm').addEventListener('submit', e=>{
        e.preventDefault();
        const email = document.getElementById('forgotEmail').value.trim();
        if(!email){ alert('Enter email'); return; }

        container.innerHTML = `
            <form id="resetPasswordForm">
                <div class="form-group"><label for="newPassword">New Password:</label><input type="password" id="newPassword" required></div>
                <div class="form-group"><label for="confirmPassword">Confirm Password:</label><input type="password" id="confirmPassword" required></div>
                <button type="submit">Change Password</button>
            </form>
        `;
        container.querySelector('#resetPasswordForm').addEventListener('submit', ev=>{
            ev.preventDefault();
            const newPass = document.getElementById('newPassword').value.trim();
            const confirmPass = document.getElementById('confirmPassword').value.trim();
            if(!newPass || !confirmPass){ alert('Fill all fields'); return; }
            if(newPass!==confirmPass){ alert('Passwords do not match'); return; }

            fetch('/api/update-password',{
                method:'POST',
                headers:{'Content-Type':'application/x-www-form-urlencoded'},
                body:`email=${encodeURIComponent(email)}&password=${encodeURIComponent(newPass)}`
            })
            .then(r=>r.text())
            .then(msg=>{ alert(msg); showLoginPage(); })
            .catch(err=>alert('Error: '+err));
        });
    });
    document.getElementById('forgotPasswordPage').classList.remove('hidden');
}

function showRegisterPage(){
    document.getElementById('loginPage').classList.add('hidden');
    document.getElementById('registerPage').classList.remove('hidden');
    generateRegCaptcha();
}
function showLoginPage(){
    document.getElementById('registerPage').classList.add('hidden');
    document.getElementById('forgotPasswordPage').classList.add('hidden');
    document.getElementById('loginPage').classList.remove('hidden');
    generateCaptcha();
}

document.getElementById('studentSearch').addEventListener('input', function(){
    const searchTerm = this.value.toLowerCase();
    document.querySelectorAll('.student-card').forEach(card=>{
        const name = card.querySelector('.student-name').textContent.toLowerCase();
        const program = card.querySelector('.student-program').textContent.toLowerCase();
        card.style.display = (name.includes(searchTerm) || program.includes(searchTerm)) ? 'block' : 'none';
    });
});

document.addEventListener('DOMContentLoaded', function(){
    showPage('loginPage');
    generateCaptcha();
});
